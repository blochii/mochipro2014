<!DOCTYPE html> 
<html lang="ja"> 
    <head> 
        <meta charset="utf-8"> 
        <title>Twitter Test | TM Lib</title>
        
        
        <!-- prettify -->
        <link type="text/css" rel="stylesheet" href="../../plugins/prettify/prettify.css" />
        <script src="../../plugins/prettify/prettify.js"></script>
        
        
        <style>
            body { font-family: "Meiryo", "メイリオ", "ヒラギノ角ゴ Pro W3", sans-serif; }
            
            #content {
                display: -webkit-box;
                display: -moz-box;
                display: -o-box;
                display: box;
            }
            
            #content>* {
                padding: 10px 20px;
                width: 50%;
                -webkit-box-sizing: border-box;
                -moz-box-sizing: border-box;
                -o-box-sizing: border-box;
                box-sizing: border-box;
            }
            
            canvas {
                box-shadow: 0px 0px 4px 0px #aaa;
            }
            
        </style>
        
        <script src="../../src/tmlib.js"></script>
        
        <script src="../../src/core/object.js"></script>
        <script src="../../src/core/string.js"></script>
        <script src="../../src/core/number.js"></script>
        <script src="../../src/core/array.js"></script>
        <script src="../../src/core/function.js"></script>
        <script src="../../src/core/date.js"></script>
        <script src="../../src/core/math.js"></script>
        
        <script src="../../src/util/ajax.js"></script>
        <script src="../../src/util/querystring.js"></script>
        
        <script src="../../src/dom/element.js"></script>
        <script src="../../src/dom/event.js"></script>
        
        <script src="../../src/social/twitter.js"></script>
        
        <script src="../../plugins/console.tm.js"></script>
        
        <script id="test-script">
            
            /*
             * main
             */
            tm.main(function() {
                // コンソール
                var c = tm.Console("#console");
                var eReply      = document.getElementById("reply");
                var eRetweet    = document.getElementById("retweet");
                var eFavorite   = document.getElementById("favorite");
                var eFollow     = document.getElementById("follow");
                
                // reply
                var url = tm.social.Twitter.createURL({
                    type        : "tweet",
                    in_reply_to : "210219483959263232",
                    text        : "テストだよ～",
                    url         : "http://tmlife.net",
                    hashtags    : "web,javascript,tmlibjs",
                    via         : "phi_jp",
                });
                eReply.href = url;
                
                // retweet
                var url = tm.social.Twitter.createURL({
                    type: "retweet",
                    tweet_id: "210219483959263232",
                });
                eRetweet.href = url;
                
                // favorite
                var url = tm.social.Twitter.createURL({
                    type: "favorite",
                    text: "テスト",
                    tweet_id: "210219483959263232",
                });
                eFavorite.href = url;
                
                // follow
                var url = tm.social.Twitter.createURL({
                    type: "user",
                    text: "テスト",
                    screen_name: "phi_jp",
                });
                eFollow.href = url;
                
                // 検索結果
                tm.social.Twitter.search({
                    q: "%23tmlibjs",
                    locale: "ja",
                    rpp: 100,
                    include_entities: true,
                }, function(data) {
                    console.dir(data);
                    
                    c.group("search");
                    
                    for (var i=0,len=data.results.length; i<len; ++i) {
                        var t = data.results[i];
                        c.log(i.padding(3), ":", t.text);
                    }
                    
                    c.groupEnd("search");
                });
            });
            
            
            tm.main(function() {
                
                /*
                tm.social.Twitter.getFollowers({
                    id: "tmlife_jp",
                }, function(data, status) {
                    console.dir(data);
                });
                /**/
            });
            
        </script>
        
        <script>
            tm.dom.Element(window).event.add("load", function() {
                tm.dom.Element("#code").text = tm.dom.Element("#test-script").text;
                prettyPrint();
            });
        </script>
    </head>
    
    <body>
        
        <h1>Twitter Test | TM Lib</h1>
        
        <div id="content">
            <section>
                <a id="reply" target="_blank">Reply</a>
                <a id="retweet" target="_blank">Retweet</a>
                <a id="favorite" target="_blank">Favorite</a>
                <a id="follow" target="_blank">Follow</a>
                <h2>Console</h2>
                <pre id="console" class="prettyprint"></pre>
            </section>
            <section>
                <h2>Code</h2>
                <pre id="code" class="prettyprint"></pre>
            </section>
        </div>
        
        
    </body>
</html>
